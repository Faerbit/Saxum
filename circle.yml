general:
    branches:
        only:
            - master

machine:
    services:
        - docker

dependencies:
    override:
        - sudo add-apt-repository ppa:plowsharepackagers/ppa
        - sudo apt-get update
        - sudo apt-get install plowshare4

database:
    override:

test:
    override:
        - docker run -v ~/swp:/swp/swp -w=/swp/swp -u=$(id -u) faerbit/swp ./package.sh linux
        - docker run -v ~/swp:/swp/swp -w=/swp/swp -u=$(id -u) faerbit/swp ./package.sh windows
        - cp MarbleGame_Windows.zip MarbleGame_Linux.zip $CIRCLE_ARTIFACTS

deployment:
    master:
        branch: master
        commands:
            - plowup --folder=GameBuilds -b "$mfemail":"$mfpass" MarbleGame_Windows.zip
            - plowup --folder=GameBuilds -b "$mfemail":"$mfpass" MarbleGame_Linux.zip
